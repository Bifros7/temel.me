<div id="main-container">
	<mat-card id="customer">
		<mat-card-title>Customer</mat-card-title>
		<mat-card-content>
			<table>
				<tr matTooltip="Customer number: {{customer.number}}">
					<td class="label">#</td>
					<td class="value">{{customer.number}}</td>
				</tr>
				<tr matTooltip="Name: {{customer.name}}">
					<td class="label">Name</td>
					<td class="value">{{customer.name}}</td>
				</tr>
			</table>
			<mat-divider class="faded"></mat-divider>
			<table>
				<tr matTooltip="Phone: {{customer.phone}}">
					<td class="label">Phone</td>
					<td class="value">{{customer.phone}}</td>
				</tr>
				<tr matTooltip="Fax: {{customer.fax}}">
					<td class="label">Fax</td>
					<td class="value">{{customer.fax}}</td>
				</tr>
			</table>
			<mat-divider class="faded"></mat-divider>
			<table>
				<tr matTooltip="Website: {{customer.website}}">
					<td class="label">Website</td>
					<td class="value"><a href="{{(customer.website ? (customer.website.match('^http://') ? customer.website : 'http://' + customer.website) : '')}}">{{customer.website}}</a></td>
				</tr>
				<tr>
					<td class="label">E-Mail addresses</td>
					<td class="value">
						<span *ngFor="let emailAddress of customer.emailAddresses, let last = last">
							<a href="mailto:{{emailAddress}}" matTooltip="{{emailAddress}}">{{emailAddress}}</a>
							<br *ngIf="!last">
						</span>
					</td>
				</tr>
			</table>
			<mat-divider class="faded"></mat-divider>
			<table>
				<tr matTooltip="Group: {{customer.group}}">
					<td class="label">Group</td>
					<td class="value">{{customer.group}}</td>
				</tr>
				<tr matTooltip="Price group: {{customer.priceGroup}}">
					<td class="label">Price group</td>
					<td class="value">{{customer.priceGroup}}</td>
				</tr>
				<tr matTooltip="Industry sector: {{customer.industry}}">
					<td class="label">Industry sector</td>
					<td class="value">{{customer.industry}}</td>
				</tr>
				<tr matTooltip="Yearly revenue: {{customer.revenue}}">
					<td class="label">Yearly revenue</td>
					<td class="value">{{customer.revenue}}</td>
				</tr>
				<tr matTooltip="Amount of employees: {{customer.employees}}">
					<td class="label">Amount of employees</td>
					<td class="value">{{customer.employees}}</td>
				</tr>
				<tr>
					<td class="label">Account managers</td>
					<td class="value">
						<span *ngFor="let accountManager of customer.accountManagers, let last = last" matTooltip="{{accountManager.responsibility}}">
							{{accountManager.name}}
							<br *ngIf="!last">
						</span>
					</td>
				</tr>
			</table>
			<mat-divider class="faded"></mat-divider>
			<table>
				<tr matTooltip="Location: {{customer.location}}">
					<td class="label">Location</td>
					<td class="value">{{customer.location}}</td>
				</tr>
				<tr matTooltip="Clerk: {{customer.clerk}}">
					<td class="label">Clerk</td>
					<td class="value">{{customer.clerk}}</td>
				</tr>
			</table>
			<mat-divider class="faded"></mat-divider>
			<table>
				<tr matTooltip="Town: {{customer.town}}">
					<td class="label">Town</td>
					<td class="value">{{customer.town}}</td>
				</tr>
				<tr matTooltip="ZIP: {{customer.zipCode}}">
					<td class="label">ZIP</td>
					<td class="value">{{customer.zipCode}}</td>
				</tr>
				<tr matTooltip="Street: {{customer.street}}">
					<td class="label">Street</td>
					<td class="value">{{customer.street}}</td>
				</tr>
			</table>
			<mat-divider class="faded"></mat-divider>
			<table>
				<tr>
					<th colspan="2" class="title">Yearly sales</th>
				</tr>
				<tr *ngFor="let year of customer.yearlySales">
					<td class="label">{{year.year}}</td>
					<td class="value"  matTooltip="{{year.sales | currency:'EUR':true}}">{{year.sales | currency:'EUR':true}}</td>
				</tr>
			</table>
		</mat-card-content>
		<mat-card-actions>
			<button mat-button (click)="editCustomer()" [disabled]="customerEditDialogRef">EDIT</button>
		</mat-card-actions>
	</mat-card>
	<mat-card id="contacts">
		<mat-card-title>Contacts</mat-card-title>
		<mat-card-content>
			<mat-accordion class="example-headers-align">
				<mat-expansion-panel *ngFor="let contact of contacts, let i = index, let last = last" [expanded]="openContact === i" (opened)="openContact = i">
					<mat-expansion-panel-header>
						<mat-panel-title>
							{{contact.name}}
						</mat-panel-title>
						<mat-panel-description matTooltip="Umsatz: {{contact.revenue | currency:'EUR':true}}">
							{{contact.revenue | currency:'EUR':true}}
						</mat-panel-description>
					</mat-expansion-panel-header>

					<table>
						<tr matTooltip="Phone: {{contact.phone}}">
							<td class="label">Phone</td>
							<td class="value">{{contact.phone}}</td>
						</tr>
						<tr matTooltip="Fax: {{contact.fax}}">
							<td class="label">Fax</td>
							<td class="value">{{contact.fax}}</td>
						</tr>
					</table>
					<mat-divider class="faded"></mat-divider>
					<table>
						<tr>
							<td class="label">E-Mail addresses</td>
							<td class="value">
								<span *ngFor="let emailAddress of contact.emailAddresses, let last = last"  matTooltip="{{emailAddress}}">
									{{emailAddress}}
									<br *ngIf="!last">
								</span>
							</td>
						</tr>
					</table>
					<mat-divider class="faded"></mat-divider>
					<table>
						<tr matTooltip="Town: {{contact.town}}">
							<td class="label">Town</td>
							<td class="value">{{contact.town}}</td>
						</tr>
						<tr matTooltip="ZIP: {{contact.zipCode}}">
							<td class="label">ZIP</td>
							<td class="value">{{contact.zipCode}}</td>
						</tr>
						<tr matTooltip="Street: {{contact.street}}">
							<td class="label">Street</td>
							<td class="value">{{contact.street}}</td>
						</tr>
					</table>
				</mat-expansion-panel>
			</mat-accordion>
		</mat-card-content>
	</mat-card>
	<mat-card id="details">
		<mat-card-title>Details</mat-card-title>
		<mat-card-content>
			<mat-tab-group>
				<mat-tab label="Addresses">
					<mat-list>
						<div *ngIf="!addresses.length">No addresses have been registered yet.</div>
						<div *ngFor="let address of addresses">
							<mat-list-item>
								<mat-icon mat-list-avatar>contact_mail</mat-icon>
								<h4 mat-line>{{address.type}}</h4>
								<p mat-line>{{address.town}}, {{address.zipCode}}, {{address.street}}</p>
							</mat-list-item>
						</div>
					</mat-list>
				</mat-tab>
				<mat-tab label="Foobar">
					foobar
				</mat-tab>
			</mat-tab-group>
		</mat-card-content>
	</mat-card>
</div>
